<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:BookOrganizer.Desktop.ViewModels"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="500"
        x:Class="BookOrganizer.Desktop.Views.SettingsWindow"
        x:DataType="vm:SettingsViewModel"
        Title="Settings" Width="500" Height="620"
        MinWidth="400" MinHeight="500"
        WindowStartupLocation="CenterOwner"
        SizeToContent="Height">

    <ScrollViewer>
        <StackPanel Spacing="12" Margin="24" MaxWidth="440">
            <TextBlock Text="Audiobookshelf Settings" FontSize="18" FontWeight="Bold" />
            <TextBlock TextWrapping="Wrap"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}">
                Configure connection to your Audiobookshelf server for publishing audiobooks.
            </TextBlock>

            <TextBlock Text="Server URL" FontSize="11"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
            <TextBox Text="{Binding AbsServerUrl}" Watermark="https://abs.example.com" />

            <TextBlock Text="API Key" FontSize="11"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
            <TextBox Text="{Binding AbsApiKey}" PasswordChar="*"
                     Watermark="Enter API key..." />

            <TextBlock Text="ABS Library Folder (local mount)" FontSize="11"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
            <TextBox Text="{Binding AbsLibraryFolder}"
                     Watermark="/mnt/abs-library or /Volumes/abs-library" />

            <StackPanel Orientation="Horizontal" Spacing="8">
                <Button Content="Test Connection" Command="{Binding TestAbsConnectionCommand}" />
            </StackPanel>

            <TextBlock Text="{Binding AbsConnectionStatus}" FontSize="11"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                       TextWrapping="Wrap" />

            <TextBlock Text="Library" FontSize="11"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                       Margin="0,8,0,0" />
            <ComboBox ItemsSource="{Binding AbsLibraries}"
                      SelectedValue="{Binding SelectedAbsLibraryId}"
                      SelectedValueBinding="{Binding Id}"
                      DisplayMemberBinding="{Binding}"
                      HorizontalAlignment="Stretch" />

            <Separator Margin="0,8" />

            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right">
                <Button Content="Save" Command="{Binding SaveCommand}" Classes="accent"
                        Click="OnSaveClick" />
                <Button Content="Cancel" Click="OnCancelClick" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>

</Window>
